<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>AngularJS Cookbook → Use the $compile function</title>
  <link href="/assets/stylesheets/application.css" rel="stylesheet" type="text/css" />
  <script src="/assets/javascripts/application.js" type="text/javascript"></script>
</head>
<body>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-39010393-4', 'auto');
  ga('send', 'pageview');
</script>

  <nav class="navbar navbar-light bg-transparent">
  <div class="container">
    <a class="navbar-brand" href="/">AngularJS Cookbook</a>
    <!--<form class="form-inline navbar-form pull-right">-->
      <!--<input class="form-control" type="text" placeholder="Search">-->
      <!--<button class="btn btn-success-outline" type="submit">Search</button>-->
    <!--</form>-->
  </div>
</nav>


  <div class="header-bg" style="background-color: #3F51B5;"></div>

  <div class="container">
    <header>
      <div class="row" style="margin-top: 40px;">
        <div class="col-xs-12 col-md-8">
          <h1 class="page-title" style="margin-top: 0px;">
            <a href="/">Use the $compile function</a>
          </h1>
          <p class="lead" style="color: #ccc;"></p>
          <p style="color: #aaa;">by Sascha Brink</p>

          <a target="_blank" class="btn btn-success" href="https://leanpub.com/angularjs-cookbook">Buy this book</a>
        </div>
        <div class="hidden-xs hidden-sm col-md-4 text-center">
          <a target="_blank" href="https://leanpub.com/angularjs-cookbook"><img class="img-shadowed" src="/assets/images/cover-sm.jpg" /></a>
        </div>
      </div>
    </header>

    <br>

    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-10 col-lg-9">
        
<h2 id="problem">Problem</h2>

<p>You created an html string with some AngularJS directives inside your link function. As you attach it to the DOM, you expect AngularJS to compile it for you, but as output you just get exactly what you wrote.</p>

<h2 id="solution">Solution</h2>

<p>If you you use AngularJS directive in your normal html, AngularJS will compile it for you when the site is rendered.
If you create a string inside a link function of a directive, you have to do this manually. You can do this by injecting the <code>$compile</code> service. You can use <code>$compile</code> with either a <code>string</code> or an <code>angular.element</code>. This is
returning a linking function that is called with a scope. This again returns an element, which then can be inserted into the DOM.</p>

<p><em>With a string:</em></p>

<pre><code>newElement = $compile(myString)(scope)
</code></pre>

<p><em>With an element:</em></p>

<pre><code>newElement = $compile(angular.element)(scope)
</code></pre>

<p>Returns an <code>angular.element</code>, <strong>not a string</strong>!</p>

<h3 id="what-if-dont-having-a-scope-to-compile-it-against">What if don’t having a scope to compile it against?</h3>

<p>Usually you would use <code>$compile</code> inside a link function of a directive and there you would have a scope. If you use it for some reason somewhere else, e.g. inside a service, you could pass the scope to the function from outside. If  you just need a scope, you can also just use the root scope. Inject <code>$rootScope</code> and you’re ready to go.</p>

<pre><code>newElement = $compile(myString)($rootScope)
</code></pre>



      </div>
    </div>
  </div>

  <br>

<footer class="footer">
  <div class="container">
    <hr>
    <ul class="list-inline">
      <li><a href="http://angularjs.de/datenschutz" target="_blank">Datenschutz</a></li>
      <li><a href="http://angularjs.de/impressum" target="_blank">Impressum</a></li>
    </ul>
  </div>
</footer>

</body>
</html>
